{% extends "base.html" %}
{% load sanitize %}
{% block title %}{{ letter.name|safe_text }}{% endblock %}
{% block content %}

<!-- HERO -->
<section class="relative overflow-hidden rounded-[2.5rem] border border-white/10 bg-slate-900/40 p-8 md:p-12">
  <div class="pointer-events-none absolute -top-32 -left-32 h-80 w-80 rounded-full bg-emerald-500/10 blur-[100px]">
  </div>
  <div class="pointer-events-none absolute -bottom-32 -right-32 h-80 w-80 rounded-full bg-sky-500/10 blur-[100px]">
  </div>

  <div class="flex flex-col md:flex-row md:items-center justify-between gap-6 relative z-10">
    <div class="space-y-4">
      <div
        class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/10 text-[10px] font-black uppercase tracking-widest text-slate-400">
        ALIFBO ‚Ä¢ TARTIB RAQAMI: #{{ letter.order }}
      </div>
      <h1 class="text-5xl md:text-6xl font-black text-white leading-tight">
        {{ letter.name }} <span class="text-emerald-400">Harfi</span>
      </h1>
      <p class="text-slate-400 text-lg max-w-xl leading-relaxed">
        Bu harfni yozilish shakllari, talaffuz qoidalari va real so'zlardagi misollar orqali chuqurroq o'rganing.
      </p>
    </div>

    <div class="flex flex-wrap gap-3">
      <a href="/alphabet/"
        class="px-6 py-3 rounded-2xl bg-white/5 border border-white/10 text-white font-bold text-sm hover:bg-white/10 transition">
        ‚Üê RO'YXATGA QAYTISH
      </a>
      <a href="{% url 'arab:letter_practice' letter.id %}"
        class="px-6 py-3 rounded-2xl bg-emerald-500 text-slate-950 font-black text-sm hover:bg-emerald-400 transition shadow-lg shadow-emerald-500/20">
        YOZISHNI MASHQ QILISH
      </a>
    </div>
  </div>
</section>

<!-- Makhraj Section -->
{% if letter.makhraj_image or letter.makhraj_description %}
<section class="mt-6 rounded-3xl border border-white/10 bg-slate-800/50 p-8">
  <h2 class="text-2xl font-bold text-white mb-4">Maxraj (Talaffuz o'rni)</h2>
  <div class="flex flex-col md:flex-row gap-8 items-start">
    {% if letter.makhraj_image %}
    <div class="w-full md:w-1/3">
      <img src="{{ letter.makhraj_image.url }}" alt="Makhraj" class="w-full rounded-2xl border border-white/10">
    </div>
    {% endif %}
    <div class="w-full md:w-2/3">
      {% if letter.makhraj_description %}
      <p class="text-lg text-slate-300 leading-relaxed">{{ letter.makhraj_description|linebreaks }}</p>
      {% endif %}
    </div>
  </div>
</section>
{% endif %}

<div class="mt-6 grid lg:grid-cols-3 gap-4">

  <!-- LEFT: BIG PREVIEW -->
  <section class="rounded-3xl border border-white/10 bg-white/5 p-6 text-center" dir="rtl">
    <div class="rounded-3xl border border-white/10 bg-slate-950/40 p-6">
      <div class="arabic-font text-[100px] md:text-[120px] font-black leading-none text-white">
        {{ letter.arabic }}
      </div>
      <div class="mt-2 text-xs text-slate-400 [direction:ltr]">
        Default letter preview
      </div>
    </div>

    <!-- quick diacritics -->
    <div class="mt-4 grid grid-cols-3 gap-3 [direction:ltr]">
      <div class="group rounded-2xl border border-white/10 bg-white/5 p-4 hover:bg-white/10 transition">
        <div class="text-[11px] text-slate-400">Fatha</div>
        <div class="arabic-font text-3xl font-black text-white mt-1"> {{ letter.arabic }}Ÿé </div>
      </div>
      <div class="group rounded-2xl border border-white/10 bg-white/5 p-4 hover:bg-white/10 transition">
        <div class="text-[11px] text-slate-400">Kasra</div>
        <div class="arabic-font text-3xl font-black text-white mt-1"> {{ letter.arabic }}Ÿê </div>
      </div>
      <div class="group rounded-2xl border border-white/10 bg-white/5 p-4 hover:bg-white/10 transition">
        <div class="text-[11px] text-slate-400">Damma</div>
        <div class="arabic-font text-3xl font-black text-white mt-1"> {{ letter.arabic }}Ÿè </div>
      </div>
    </div>

    <div class="mt-4 text-xs text-slate-400 [direction:ltr]">
      Joins to next:
      <span class="text-slate-200 font-semibold">{{ letter.joins_to_next }}</span>
    </div>
  </section>

  <!-- MIDDLE: SHAPES -->
  <section class="rounded-3xl border border-white/10 bg-white/5 p-6" dir="rtl">
    <div class="[direction:ltr]">
      <h2 class="text-lg font-bold text-white">Harf shakllari</h2>
      <p class="mt-1 text-xs text-slate-400">So‚Äòz ichida qanday ko‚Äòrinishini ko‚Äòring</p>
    </div>

    <div class="mt-5 grid grid-cols-2 gap-3">
      <div class="group rounded-2xl border border-white/10 bg-slate-950/40 p-4 text-center hover:bg-white/5 transition">
        <div class="text-xs text-slate-400 [direction:ltr]">Isolated</div>
        <div class="arabic-font text-5xl font-black mt-1 text-white group-hover:scale-110 transition">
          {{ letter.isolated|default:letter.arabic }}
        </div>
      </div>

      <div class="group rounded-2xl border border-white/10 bg-slate-950/40 p-4 text-center hover:bg-white/5 transition">
        <div class="text-xs text-slate-400 [direction:ltr]">Final</div>
        <div class="arabic-font text-5xl font-black mt-1 text-white group-hover:scale-110 transition">
          <div class="arabic-font text-5xl font-black mt-1 text-white group-hover:scale-110 transition">
            {% if letter.final %}
            {{ letter.final|safe_text }}
            {% else %}
            ‚Äî
            {% endif %}
          </div>
        </div>

        <div
          class="group rounded-2xl border border-white/10 bg-slate-950/40 p-4 text-center hover:bg-white/5 transition">
          <div class="text-xs text-slate-400 [direction:ltr]">Initial</div>
          <div class="arabic-font text-5xl font-black mt-1 text-white group-hover:scale-110 transition">
            {{ letter.initial|default:"‚Äî" }}
          </div>
        </div>

        <div
          class="group rounded-2xl border border-white/10 bg-slate-950/40 p-4 text-center hover:bg-white/5 transition">
          <div class="text-xs text-slate-400 [direction:ltr]">Medial</div>
          <div class="arabic-font text-5xl font-black mt-1 text-white group-hover:scale-110 transition">
            {{ letter.medial|default:"‚Äî" }}
          </div>
        </div>
      </div>

      <div class="mt-5 rounded-2xl border border-white/10 bg-white/5 p-4 [direction:ltr]">
        <div class="text-xs text-slate-400">Tip</div>
        <div class="text-sm text-slate-200 mt-1 leading-relaxed">
          Harfni yodlash uchun: <span class="text-white font-semibold">Isolated ‚Üí Initial ‚Üí Medial ‚Üí Final</span>
          tartibida ko‚Äòrib chiqing.
        </div>
      </div>
  </section>

  <!-- RIGHT: EXAMPLES (WRAP CHIPS) -->
  <section class="rounded-3xl border border-white/10 bg-white/5 p-6">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-bold text-white">Misollar</h2>
      <span class="text-xs text-slate-400">{{ examples|length }} ta</span>
    </div>

    {% if examples %}
    <!-- üî• ko'p so'z sig'adi: wrap + chips -->
    <div class="mt-4 flex flex-wrap gap-3" dir="rtl">
      {% for ex in examples %}
      <div class="group rounded-2xl border border-white/10 bg-slate-950/40 px-4 py-3
                   hover:bg-white/5 transition cursor-pointer select-none"
        title="{{ ex.transliteration|default:'' }} ‚Ä¢ {{ ex.translation_uz|default:'' }}">
        <div class="arabic-font text-3xl font-black text-white leading-none">
          {{ ex.arabic_text }}
        </div>

        <div class="mt-2 text-[11px] text-slate-300 [direction:ltr]">
          {% if ex.transliteration %}
          {{ ex.transliteration|safe_text }}
          {% else %}
          ‚Äî
          {% endif %}
        </div>

        <div class="mt-1 text-xs text-slate-200 [direction:ltr]">
          UZ: <span class="font-semibold text-white">
            {% if ex.translation_uz %}
            {{ ex.translation_uz|safe_text }}
            {% else %}
            ‚Äî
            {% endif %}
          </span>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="mt-4 text-slate-400 text-sm">
      Misollar hali qo‚Äòshilmagan.
    </div>
    {% endif %}

    <div class="mt-5 rounded-2xl border border-white/10 bg-white/5 p-4">
      <div class="text-xs text-slate-400">Maslahat</div>
      <div class="mt-2 text-sm text-slate-200 leading-relaxed">
        Misollarni ko‚Äòrib bo‚Äòlgach, keyingi harfga o‚Äòting va har kuni kamida 3 ta harfni mustahkamlang.
      </div>
    </div>
  </section>

</div>

{% endblock %}