{% extends "base.html" %}
{% block title %}Tajvid{% endblock %}
{% block content %}

<!-- HEADER & SEARCH -->
<section class="rounded-3xl border border-white/10 bg-white/5 p-6 md:p-8 relative overflow-hidden">
  <div class="pointer-events-none absolute -top-24 -right-24 h-64 w-64 rounded-full bg-emerald-500/10 blur-3xl"></div>

  <div class="relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6">
    <div>
      <h1 class="text-3xl md:text-4xl font-black">üìñ Tajvid</h1>
      <p class="mt-2 text-slate-300 text-sm max-w-lg leading-relaxed">
        Qur'onni to'g'ri o'qish qoidalari. Qoidani tanlang, misollarni tinglang va mashq qiling.
      </p>
    </div>

    <!-- üß† QUIZ BUTTON -->
    <a href="{% url 'arab:tajweed_quiz' %}"
      class="shrink-0 inline-flex items-center gap-2 rounded-2xl bg-white text-slate-950 px-6 py-3 font-bold hover:bg-slate-200 transition shadow-lg shadow-emerald-500/10">
      üß† Tajvid mashq (Quiz)
    </a>
  </div>

  <!-- SEARCH BAR -->
  <div class="mt-8">
    <form method="get" class="flex flex-col sm:flex-row gap-3">
      <div class="relative flex-1">
        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400">üîç</span>
        <input type="text" name="q" value="{{ q|default:'' }}" placeholder="Qoida qidirish..."
          class="w-full rounded-2xl border border-white/10 bg-slate-950/50 pl-11 pr-4 py-3 text-sm text-white focus:outline-none focus:border-emerald-500/50 transition placeholder-slate-500">
      </div>

      <div class="flex gap-2 overflow-x-auto pb-1 sm:pb-0">
        <a href="?"
          class="shrink-0 rounded-xl border {% if not level %}border-emerald-500/50 bg-emerald-500/20 text-emerald-300{% else %}border-white/10 bg-white/5 text-slate-400 hover:bg-white/10{% endif %} px-4 py-3 text-sm font-medium transition">
          All
        </a>
        {% for l in levels %}
        <a href="?level={{ l }}"
          class="shrink-0 rounded-xl border {% if level == l %}border-emerald-500/50 bg-emerald-500/20 text-emerald-300{% else %}border-white/10 bg-white/5 text-slate-400 hover:bg-white/10{% endif %} px-4 py-3 text-sm font-medium transition">
          {{ l }}
        </a>
        {% endfor %}
      </div>
    </form>
  </div>
</section>

<!-- STATS / INFO (ixtiyoriy, lekin kuchli ko‚Äòrinadi) -->
<section class="mt-6 grid sm:grid-cols-3 gap-4">
  <div class="rounded-3xl border border-white/10 bg-white/5 p-4">
    <div class="text-xs text-slate-400">Format</div>
    <div class="mt-1 text-lg font-bold">Qoidalar + Mashq</div>
  </div>
  <div class="rounded-3xl border border-white/10 bg-white/5 p-4">
    <div class="text-xs text-slate-400">Darajalar</div>
    <div class="mt-1 text-lg font-bold">A0 ‚Üí B1</div>
  </div>
  <div class="rounded-3xl border border-white/10 bg-white/5 p-4">
    <div class="text-xs text-slate-400">Usul</div>
    <div class="mt-1 text-lg font-bold">Amaliy + Vizual</div>
  </div>
</section>

<!-- PRO FEATURES SECTION -->
<section class="mt-6 grid sm:grid-cols-2 gap-4">
  <a href="{% url 'arab:tajweed_logic_tree' %}"
    class="group rounded-3xl border border-white/10 bg-emerald-500/10 p-6 hover:bg-emerald-500/20 transition relative overflow-hidden">
    <div class="relative z-10">
      <div class="text-emerald-400 font-bold">Pro Logic</div>
      <div class="mt-1 text-xl font-black">Rule Finder (Logic Tree)</div>
      <p class="mt-2 text-slate-300 text-sm">Savollar orqali qoidani mantiqiy topishni o'rganing.</p>
    </div>
    <div class="absolute -bottom-4 -right-4 text-6xl opacity-10 group-hover:scale-110 transition">üå≤</div>
  </a>
  <a href="{% url 'arab:tajweed_pro_drill' %}"
    class="group rounded-3xl border border-white/10 bg-sky-500/10 p-6 hover:bg-sky-500/20 transition relative overflow-hidden">
    <div class="relative z-10">
      <div class="text-sky-400 font-bold">Speed Drill</div>
      <div class="mt-1 text-xl font-black">Time Attack Mashqi</div>
      <p class="mt-2 text-slate-300 text-sm">10 soniya ichida qoidani aniqlang. Pro daraja!</p>
    </div>
    <div class="absolute -bottom-4 -right-4 text-6xl opacity-10 group-hover:scale-110 transition">‚ö°</div>
  </a>

  <!-- WHITEBOARD LINK -->
  <a href="{% url 'arab:tajweed_whiteboard' %}"
    class="group rounded-3xl border border-white/10 bg-purple-500/10 p-6 hover:bg-purple-500/20 transition relative overflow-hidden sm:col-span-2">
    <div class="relative z-10 flex items-center justify-between">
      <div>
        <div class="text-purple-400 font-bold">Amaliyot</div>
        <div class="mt-1 text-xl font-black">Oq Doska (Whiteboard)</div>
        <p class="mt-2 text-slate-300 text-sm">Harflarni yozib mashq qiling. Turli rangli markerlar!</p>
      </div>
      <div class="text-5xl group-hover:rotate-12 transition">üñåÔ∏è</div>
    </div>
  </a>
</section>

<!-- RULES BY CATEGORY -->
<div class="mt-10 space-y-12">
  {% for cat_name, cat_rules in categories.items %}
  <div>
    <h2 class="text-2xl font-black flex items-center gap-3">
      <span class="h-8 w-1 bg-emerald-500 rounded-full"></span>
      {{ cat_name }}
    </h2>

    <div class="mt-6 grid md:grid-cols-2 gap-4">
      {% for r in cat_rules %}
      <a href="{% url 'arab:tajweed_detail' r.slug %}"
        class="group rounded-3xl border border-white/10 bg-white/5 p-6 hover:bg-white/10 transition">
        <div class="flex items-center justify-between">
          <div class="text-xs text-slate-400">{{ r.level }}</div>
          <span class="text-xs text-slate-400 group-hover:text-white">‚ûú</span>
        </div>
        <div class="mt-1 text-2xl font-black">{{ r.title }}</div>
        <div class="mt-2 text-slate-300 text-sm">{{ r.short_desc }}</div>
      </a>
      {% endfor %}
    </div>
  </div>
  {% empty %}
  <div class="text-slate-300 py-10 text-center">
    Hali qoida qo‚Äòshilmagan.
  </div>
  {% endfor %}
</div>

<!-- BOTTOM QUIZ CTA (UX uchun juda yaxshi) -->
<section class="mt-10 rounded-3xl border border-white/10 bg-gradient-to-r from-emerald-500/10 to-sky-500/10 p-6">
  <h2 class="text-2xl font-black">üß† Bilimingizni tekshiring</h2>
  <p class="mt-2 text-slate-300 text-sm">
    Tajvid qoidalarini o‚Äòrganib bo‚Äòldingizmi? Keling, mashq qilamiz.
  </p>

  <a href="{% url 'arab:tajweed_quiz' %}"
    class="mt-4 inline-block rounded-2xl bg-white text-slate-950 px-6 py-3 font-bold hover:bg-slate-200 transition">
    Quizni boshlash ‚Üí
  </a>
</section>

{% endblock %}